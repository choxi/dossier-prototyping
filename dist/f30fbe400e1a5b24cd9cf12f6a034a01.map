{"version":3,"sources":["src/touch-emulator.js"],"names":["window","document","exportName","undefined","isMultiTouch","multiTouchStartPos","eventTarget","touchElements","createTouch","view","target","identifier","pageX","pageY","screenX","screenY","clientX","clientY","pageXOffset","pageYOffset","Touch","createTouchList","touchList","TouchList","i","arguments","length","pos","deltaX","deltaY","item","index","identifiedTouch","id","fakeTouchSupport","objs","documentElement","props","o","p","hasTouchSupport","Modernizr","touch","navigator","msMaxTouchPoints","maxTouchPoints","preventMouseEvents","ev","preventDefault","stopPropagation","onMouse","touchType","which","type","dispatchEvent","shiftKey","triggerTouch","eventName","mouseEv","touchEvent","createEvent","initEvent","altKey","ctrlKey","metaKey","touches","getActiveTouches","targetTouches","changedTouches","getChangedTouches","f","TouchEmulator","multiTouchOffset","push","splice","showTouches","el","styles","createElement","body","appendChild","template","prop","style","parentNode","removeChild","addEventListener","size","transform","position","left","top","background","border","opacity","borderRadius","height","width","padding","margin","display","overflow","pointerEvents","webkitUserSelect","mozUserSelect","userSelect","webkitTransform","mozTransform","zIndex","define","amd","module","exports"],"mappings":"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","file":"f30fbe400e1a5b24cd9cf12f6a034a01.map","sourcesContent":["(function(window, document, exportName, undefined) {\n    \"use strict\";\n\n    var isMultiTouch = false;\n    var multiTouchStartPos;\n    var eventTarget;\n    var touchElements = {};\n\n    // polyfills\n    if(!document.createTouch) {\n        document.createTouch = function(view, target, identifier, pageX, pageY, screenX, screenY, clientX, clientY) {\n            // auto set\n            if(clientX == undefined || clientY == undefined) {\n                clientX = pageX - window.pageXOffset;\n                clientY = pageY - window.pageYOffset;\n            }\n\n            return new Touch(target, identifier, {\n                pageX: pageX,\n                pageY: pageY,\n                screenX: screenX,\n                screenY: screenY,\n                clientX: clientX,\n                clientY: clientY\n            });\n        };\n    }\n\n    if(!document.createTouchList) {\n        document.createTouchList = function() {\n            var touchList = new TouchList();\n            for (var i = 0; i < arguments.length; i++) {\n                touchList[i] = arguments[i];\n            }\n            touchList.length = arguments.length;\n            return touchList;\n        };\n    }\n\n    /**\n     * create an touch point\n     * @constructor\n     * @param target\n     * @param identifier\n     * @param pos\n     * @param deltaX\n     * @param deltaY\n     * @returns {Object} touchPoint\n     */\n    function Touch(target, identifier, pos, deltaX, deltaY) {\n        deltaX = deltaX || 0;\n        deltaY = deltaY || 0;\n\n        this.identifier = identifier;\n        this.target = target;\n        this.clientX = pos.clientX + deltaX;\n        this.clientY = pos.clientY + deltaY;\n        this.screenX = pos.screenX + deltaX;\n        this.screenY = pos.screenY + deltaY;\n        this.pageX = pos.pageX + deltaX;\n        this.pageY = pos.pageY + deltaY;\n    }\n\n    /**\n     * create empty touchlist with the methods\n     * @constructor\n     * @returns touchList\n     */\n    function TouchList() {\n        var touchList = [];\n\n        touchList.item = function(index) {\n            return this[index] || null;\n        };\n\n        // specified by Mozilla\n        touchList.identifiedTouch = function(id) {\n            return this[id + 1] || null;\n        };\n\n        return touchList;\n    }\n\n\n    /**\n     * Simple trick to fake touch event support\n     * this is enough for most libraries like Modernizr and Hammer\n     */\n    function fakeTouchSupport() {\n        var objs = [window, document.documentElement];\n        var props = ['ontouchstart', 'ontouchmove', 'ontouchcancel', 'ontouchend'];\n\n        for(var o=0; o<objs.length; o++) {\n            for(var p=0; p<props.length; p++) {\n                if(objs[o] && objs[o][props[p]] == undefined) {\n                    objs[o][props[p]] = null;\n                }\n            }\n        }\n    }\n\n    /**\n     * we don't have to emulate on a touch device\n     * @returns {boolean}\n     */\n    function hasTouchSupport() {\n        return (\"ontouchstart\" in window) || // touch events\n               (window.Modernizr && window.Modernizr.touch) || // modernizr\n               (navigator.msMaxTouchPoints || navigator.maxTouchPoints) > 2; // pointer events\n    }\n\n    /**\n     * disable mouseevents on the page\n     * @param ev\n     */\n    function preventMouseEvents(ev) {\n        ev.preventDefault();\n        ev.stopPropagation();\n    }\n\n    /**\n     * only trigger touches when the left mousebutton has been pressed\n     * @param touchType\n     * @returns {Function}\n     */\n    function onMouse(touchType) {\n        return function(ev) {\n            // prevent mouse events\n            preventMouseEvents(ev);\n\n            if (ev.which !== 1) {\n                return;\n            }\n\n            // The EventTarget on which the touch point started when it was first placed on the surface,\n            // even if the touch point has since moved outside the interactive area of that element.\n            // also, when the target doesnt exist anymore, we update it\n            if (ev.type == 'mousedown' || !eventTarget || (eventTarget && !eventTarget.dispatchEvent)) {\n                eventTarget = ev.target;\n            }\n\n            // shiftKey has been lost, so trigger a touchend\n            if (isMultiTouch && !ev.shiftKey) {\n                triggerTouch('touchend', ev);\n                isMultiTouch = false;\n            }\n\n            triggerTouch(touchType, ev);\n\n            // we're entering the multi-touch mode!\n            if (!isMultiTouch && ev.shiftKey) {\n                isMultiTouch = true;\n                multiTouchStartPos = {\n                    pageX: ev.pageX,\n                    pageY: ev.pageY,\n                    clientX: ev.clientX,\n                    clientY: ev.clientY,\n                    screenX: ev.screenX,\n                    screenY: ev.screenY\n                };\n                triggerTouch('touchstart', ev);\n            }\n\n            // reset\n            if (ev.type == 'mouseup') {\n                multiTouchStartPos = null;\n                isMultiTouch = false;\n                eventTarget = null;\n            }\n        }\n    }\n\n    /**\n     * trigger a touch event\n     * @param eventName\n     * @param mouseEv\n     */\n    function triggerTouch(eventName, mouseEv) {\n        var touchEvent = document.createEvent('Event');\n        touchEvent.initEvent(eventName, true, true);\n\n        touchEvent.altKey = mouseEv.altKey;\n        touchEvent.ctrlKey = mouseEv.ctrlKey;\n        touchEvent.metaKey = mouseEv.metaKey;\n        touchEvent.shiftKey = mouseEv.shiftKey;\n\n        touchEvent.touches = getActiveTouches(mouseEv, eventName);\n        touchEvent.targetTouches = getActiveTouches(mouseEv, eventName);\n        touchEvent.changedTouches = getChangedTouches(mouseEv, eventName);\n\n        eventTarget.dispatchEvent(touchEvent);\n    }\n\n    /**\n     * create a touchList based on the mouse event\n     * @param mouseEv\n     * @returns {TouchList}\n     */\n    function createTouchList(mouseEv) {\n        var touchList = new TouchList();\n\n        if (isMultiTouch) {\n            var f = TouchEmulator.multiTouchOffset;\n            var deltaX = multiTouchStartPos.pageX - mouseEv.pageX;\n            var deltaY = multiTouchStartPos.pageY - mouseEv.pageY;\n\n            touchList.push(new Touch(eventTarget, 1, multiTouchStartPos, (deltaX*-1) - f, (deltaY*-1) + f));\n            touchList.push(new Touch(eventTarget, 2, multiTouchStartPos, deltaX+f, deltaY-f));\n        } else {\n            touchList.push(new Touch(eventTarget, 1, mouseEv, 0, 0));\n        }\n\n        return touchList;\n    }\n\n    /**\n     * receive all active touches\n     * @param mouseEv\n     * @returns {TouchList}\n     */\n    function getActiveTouches(mouseEv, eventName) {\n        // empty list\n        if (mouseEv.type == 'mouseup') {\n            return new TouchList();\n        }\n\n        var touchList = createTouchList(mouseEv);\n        if(isMultiTouch && mouseEv.type != 'mouseup' && eventName == 'touchend') {\n            touchList.splice(1, 1);\n        }\n        return touchList;\n    }\n\n    /**\n     * receive a filtered set of touches with only the changed pointers\n     * @param mouseEv\n     * @param eventName\n     * @returns {TouchList}\n     */\n    function getChangedTouches(mouseEv, eventName) {\n        var touchList = createTouchList(mouseEv);\n\n        // we only want to return the added/removed item on multitouch\n        // which is the second pointer, so remove the first pointer from the touchList\n        //\n        // but when the mouseEv.type is mouseup, we want to send all touches because then\n        // no new input will be possible\n        if(isMultiTouch && mouseEv.type != 'mouseup' &&\n            (eventName == 'touchstart' || eventName == 'touchend')) {\n            touchList.splice(0, 1);\n        }\n\n        return touchList;\n    }\n\n    /**\n     * show the touchpoints on the screen\n     */\n    function showTouches(ev) {\n        var touch, i, el, styles;\n\n        // first all visible touches\n        for(i = 0; i < ev.touches.length; i++) {\n            touch = ev.touches[i];\n            el = touchElements[touch.identifier];\n            if(!el) {\n                el = touchElements[touch.identifier] = document.createElement(\"div\");\n                document.body.appendChild(el);\n            }\n\n            styles = TouchEmulator.template(touch);\n            for(var prop in styles) {\n                el.style[prop] = styles[prop];\n            }\n        }\n\n        // remove all ended touches\n        if(ev.type == 'touchend' || ev.type == 'touchcancel') {\n            for(i = 0; i < ev.changedTouches.length; i++) {\n                touch = ev.changedTouches[i];\n                el = touchElements[touch.identifier];\n                if(el) {\n                    el.parentNode.removeChild(el);\n                    delete touchElements[touch.identifier];\n                }\n            }\n        }\n    }\n\n    /**\n     * TouchEmulator initializer\n     */\n    function TouchEmulator() {\n        if (hasTouchSupport()) {\n            return;\n        }\n\n        fakeTouchSupport();\n\n        window.addEventListener(\"mousedown\", onMouse('touchstart'), true);\n        window.addEventListener(\"mousemove\", onMouse('touchmove'), true);\n        window.addEventListener(\"mouseup\", onMouse('touchend'), true);\n\n        window.addEventListener(\"mouseenter\", preventMouseEvents, true);\n        window.addEventListener(\"mouseleave\", preventMouseEvents, true);\n        window.addEventListener(\"mouseout\", preventMouseEvents, true);\n        window.addEventListener(\"mouseover\", preventMouseEvents, true);\n\n        // it uses itself!\n        window.addEventListener(\"touchstart\", showTouches, true);\n        window.addEventListener(\"touchmove\", showTouches, true);\n        window.addEventListener(\"touchend\", showTouches, true);\n        window.addEventListener(\"touchcancel\", showTouches, true);\n    }\n\n    // start distance when entering the multitouch mode\n    TouchEmulator.multiTouchOffset = 75;\n\n    /**\n     * css template for the touch rendering\n     * @param touch\n     * @returns object\n     */\n    TouchEmulator.template = function(touch) {\n        var size = 30;\n        var transform = 'translate('+ (touch.clientX-(size/2)) +'px, '+ (touch.clientY-(size/2)) +'px)';\n        return {\n            position: 'fixed',\n            left: 0,\n            top: 0,\n            background: '#fff',\n            border: 'solid 1px #999',\n            opacity: .6,\n            borderRadius: '100%',\n            height: size + 'px',\n            width: size + 'px',\n            padding: 0,\n            margin: 0,\n            display: 'block',\n            overflow: 'hidden',\n            pointerEvents: 'none',\n            webkitUserSelect: 'none',\n            mozUserSelect: 'none',\n            userSelect: 'none',\n            webkitTransform: transform,\n            mozTransform: transform,\n            transform: transform,\n            zIndex: 100\n        }\n    };\n\n    // export\n    if (typeof define == \"function\" && define.amd) {\n        define(function() {\n            return TouchEmulator;\n        });\n    } else if (typeof module != \"undefined\" && module.exports) {\n        module.exports = TouchEmulator;\n    } else {\n        window[exportName] = TouchEmulator;\n    }\n})(window, document, \"TouchEmulator\");\n"]}